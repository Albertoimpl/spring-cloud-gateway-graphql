= Spring Cloud Gateway and GraphQL

author-service
[source,bash]
----
./gradlew author-service:bootRun
----
[source,bash]
----
curl localhost:8091/authors
----

book-service
[source,bash]
----
./gradlew book-service:bootRun
----
[source,bash]
----
curl localhost:8090/books
----

graphql-server
[source,bash]
----
./gradlew graphql-server:bootRun
----

[source,bash]
----
curl -X POST \
-H "Content-Type: application/json" \
-d '{"query": "{books { title authors {firstName       lastName } } }"}' \
http://localhost:8080/graphql
----

edge-gateway
[source,bash]
----
docker run -p6379:6379 redis:5.0.9-alpine
----
[source,bash]
----
./gradlew edge-gateway:bootRun
----

[source,bash]
----
curl -X POST \
-H "Content-Type: application/json" \
-d '{"query": "{books { title authors {firstName       lastName } } }"}' \
http://localhost:8081/library
----


== Filters


== Authentication

Spring Security has been enabled with most of the default setup. A configuration class `SecurityConfig` has been defined to disable CSRF and CORS for this example.

```
return http
			.csrf().disable()
			.cors().disable()
			.authorizeExchange()
				.anyExchange().authenticated()
			.and()
				.httpBasic()
			.and()
			.build();
```

The user `alice` has been hardcoded in the `application.yml` file for quick demo purposes.
```
  security:
    user: # Only for a quick starter of this project - do not use in any environment
      name: alice
      password: test
```

This is a basic security example that is not valid for a production environment.
Please, follow the https://docs.spring.io/spring-security/site/docs/5.2.1.RELEASE/reference/htmlsingle[documentation] to adjust the filter to your security requirements.
